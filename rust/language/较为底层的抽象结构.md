# Rust 的部分语法特性

# ManualDrop\<T\>

`ManuallyDrop<T>`是一个Rust中的封装器类型，用于禁止Rust自动调用类型`T`的析构函数（`drop`函数）。使用这个类型将需要你手动调用`drop`函数来释放资源，它是一个零成本的抽象。

`ManuallyDrop<T>`的主要特性是：

- 它可以封装一个值并防止其在离开作用域时被自动销毁。
- 提供`ManuallyDrop::new`函数进行初始化。
- 提供`ManuallyDrop::drop`函数来显式地手动销毁封装的值。
- 提供`ManuallyDrop::into_inner`函数来获取封装的值，同时保证其不被销毁。
- 提供`ManuallyDrop::take`函数在稳定Rust中（从rustc 1.42.0版本开始）用以取出被封装的值。

一般来讲，`ManuallyDrop<T>`类型的使用场景相当特殊和罕见，它通常用于以下场景：

- 你需要特定的、非RAII的资源管理方式。例如，你可能在释放一个资源之前需要保证其他资源已经被释放。
- 你创建了一些临时数据，这些数据在函数返回后不需要（也不能）被销毁。例如，当你返回一个静态引用到一个局部变量时。
- 在某些需要手动管理内存的高级场景，比如自定义数据结构、FFI交互、unsafe Rust编程等。