# IOC

IOC(Inversion of control) 即控制反转，为 Spring 里面的重要概念，也是最需要掌握的跨语言知识及工程方法。

其核心目的是减小代码耦合度，常见实现方式为依赖注入 DI。

# 背景及问题

对于 Java 代码中，由于存在类，因此需要常常考虑 A 类需要使用 B 类对象的时候：

```java
class B {}

class A {
    B b = new B();
}
```

对于上面的代码，A 中使用 B 对象，则 B 对象的控制权就在 A 中。

由于我们在工程中有着成百上千个类，各个类之间又存在耦合，如果我们只能以字段这种方式注入的话，那么将会十分复杂且耦合。因此 Spring 创造了 IOC 容器，用来存放所有的 Bean 以解决这个问题，也即 IOC 容器来完成对类的管理，并处理他们之间的依赖联系。

例如，将上面这个例子改为 IOC 的话就是，项目启动的时候 A 与 B 的类全路径、Bean 名称等信息都会被 IOC 容器获取到(xml 方式或者是注解的方式)，然后 IOC 容器就通过这些信息基于反射区创建对象，这些对象控制权都收拢在 Spring 容器中。此时如果 A 类需要 B 类，它只需要去 IOC 容器拿就行了。

因此，所谓的控制反转无非就是：B 的控制权从 A 移交到 Spring 容器。

# 写一个简单的 IOC 容器